{{- if (eq .chezmoi.os "linux") -}}
{{ template "bash.top" . }}

# Check if we're on an apt-capable system
if command -v apt-get &> /dev/null; then
    set_color yellow; echo "System is apt-capable."; set_color normal
else
    set_color red; echo "This system does not use apt package manager."; set_color normal
    exit 1
fi

# Check if build-essential is installed
if dpkg -l | grep -q 'build-essential'; then
    set_color green; echo "Build-essential is already installed."; set_color normal
else
    set_color yellow; echo "Build-essential is not installed. Installing..."; set_color normal;
    sudo apt-get update > /dev/null
    sudo apt-get -y install build-essential > /dev/null
    if [ $? -eq 0 ]; then
        set_color green; echo "Build-essential has been successfully installed."; set_color normal
    else
        set_color red; echo "Failed to install build-essential."; set_color normal
        exit 1
    fi
fi

{{ end -}}
